---
import { getCollection } from "astro:content";
import "swiper/css";
import "swiper/css/navigation";
import "swiper/css/pagination";

import DayScheduleCard from "../DayScheduleCard/DayScheduleCard.astro";

const programacion = await getCollection("programacion");
---

<!-- Slider main container --><!-- Swiper -->
<div class="wrapper__slide">
  <div class="swiper mySwiper">
    <div class="swiper-wrapper">
      {
        programacion
          .sort((a, b) => a.data.id - b.data.id) // üëà orden manual
          .map((day) => {
            const { slug, data } = day;
            const { title, activities, date } = data;

            return (
              <div class="swiper-slide">
                <DayScheduleCard
                  day={title}
                  activities={activities}
                  slug={slug}
                />
              </div>
            );
          })
      }
    </div>

    <!-- If we need navigation buttons -->
    <!-- <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div> -->

    <!-- If we need pagination -->
    <div class="swiper-pagination"></div>

    <!-- If we need scrollbar -->
    <div class="swiper-scrollbar"></div>
  </div>
</div>
<style>
  .wrapper__slide {
    position: relative;
    width: 100%;
  }
  /* .swiper-wrapper{
    background-color: red;

} */
  .swiper {
    width: 100%;
    height: auto;
    /* Evita crecer sin l√≠mite */
  }

  .swiper-slide {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 4rem 0;
  }

  .swiper-pagination-bullet-active {
    background: var(--swiper-pagination-color, var(--color-primary));
  }
</style>
<script>
  import Swiper from "swiper";
  import { Navigation, Pagination, Scrollbar } from "swiper/modules";

  Swiper.use([Navigation, Pagination, Scrollbar]);

  const swiper = new Swiper(".mySwiper", {
    slidesPerView: 1, // Default para m√≥viles
    spaceBetween: 10,

    pagination: {
      el: ".swiper-pagination",
      clickable: true,
    },

    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },

    scrollbar: {
      el: ".swiper-scrollbar",
      draggable: true,
    },
    loop: true,

    breakpoints: {
      640: {
        slidesPerView: 2,
        spaceBetween: 20,
      },
      1024: {
        slidesPerView: 3,
        spaceBetween: 30,
      },
      1280: {
        slidesPerView: 4,
        spaceBetween: 30,
      },
    },
  });
</script>
